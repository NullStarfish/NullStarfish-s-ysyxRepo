在正则表达式中，**匹配组（Match Groups）** 是通过括号 `( )` 捕获的子模式，可以用于提取、替换或引用匹配的特定部分。以下是 `sed` 中使用匹配组的几个实用示例：

---

### **1. 基本组捕获**
提取日期格式中的年、月、日：
```bash
echo "2023-12-25" | sed -n 's/\([0-9]\{4\}\)-\([0-9]\{2\}\)-\([0-9]\{2\}\)/Year: \1, Month: \2, Day: \3/p'
```
**输出**：
```
Year: 2023, Month: 12, Day: 25
```
- `\1`、`\2`、`\3` 分别对应三个括号捕获的组。

---

### **2. 交换两个字段**
将 "Lastname, Firstname" 格式改为 "Firstname Lastname"：s
```bash
echo "Doe, John" | sed 's/\([^,]*\), \(.*\)/\2 \1/'
```
**输出**：
```
John Doe
```
- `\([^,]*\)` 匹配逗号前的部分（`Doe`），`\(.*\)` 匹配逗号后的部分（`John`）。

---

### **3. 隐藏敏感信息**
将手机号的中间四位替换为 `****`：
```bash
echo "Phone: 13812345678" | sed 's/\([0-9]\{3\}\)[0-9]\{4\}\([0-9]\{4\}\)/\1****\2/'
```
**输出**：
```
Phone: 138****5678
```
- `\1` 是前3位，`\2` 是后4位，中间4位被替换。

---

### **4. 提取URL的域名**
从URL中提取主域名：
```bash
echo "https://www.example.com/path" | sed -n 's|https://\([^/]*\).*|\1|p'
```
**输出**：
```
www.example.com
```
- `\([^/]*\)` 匹配 `https://` 后直到第一个 `/` 之前的内容。

---

### **5. 重复单词检测**
查找连续重复的单词（如 "the the"）：
```bash
echo "This is the the example" | sed -n 's/\(\<\w\+\>\) \1/\1/p'
```
**输出**：
```
This is the example
```
- `\(\<\w\+\>\)` 匹配一个完整单词，`\1` 引用前一个单词。

---

### **6. 条件性替换**
仅在匹配到特定模式时替换：
```bash
echo "foo bar baz" | sed 's/foo \(bar\) baz/FOO \1 BAZ/'
```
**输出**：
```
FOO bar BAZ
```
- 只有 `bar` 被保留为原始内容（`\1`），其余部分被替换。

---

### **7. 多组嵌套使用**
处理日志中的时间戳和错误码：
```bash
echo "[2023-12-25 10:00] ERROR 404" | sed -n 's/\[\(.*\)\] \(.*\) \(.*\)/Date: \1, Type: \2, Code: \3/p'
```
**输出**：
```
Date: 2023-12-25 10:00, Type: ERROR, Code: 404
```

---

### **关键点总结**
1. **组引用**：用 `\( \)` 定义组，通过 `\1`、`\2` 等引用。
2. **非捕获组**：`sed` 不支持 `(?: )` 语法（这是PCRE特性），所有 `( )` 均为捕获组。
3. **特殊字符**：
   - 使用 `\< \>` 匹配单词边界（如 `\(\<\w\+\>\)`）。
   - 对正则元字符（如 `+`、`*`）需用 `\` 转义（如 `\+`）。

---

### **对比其他工具**
- `grep -oP`：支持更灵活的正则（如 Perl 风格），但 `sed` 适合需要编辑的场景。
- `awk`：处理多字段文本时更直观，但 `sed` 在简单流编辑中更轻量。

掌握匹配组能极大提升文本处理的精确度！